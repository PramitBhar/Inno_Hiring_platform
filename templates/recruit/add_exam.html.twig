<!DOCTYPE html>
<html lang="en">
<head>
   <title>{% block title %}Create new exam{% endblock %}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    {% block stylesheets %}
    {% endblock %}

    {% block javascripts %}
        {% block importmap %}{{ importmap('createForm') }}{% endblock %}
    {% endblock %}
</head>
<body>
  {% block body %}
    <div class="nav-section">
  <div class="container">


    <nav class="navbar">
    <div class="nav-logo">
      <img src="{{ asset('images/company_logo.png') }}"
      alt="nav-image" />
    </div>
    <div class="nav-btn">
      <a href="/{{app.user ? 'logout':'login'}}">
        {{app.user ? 'Logout':'Login'}}
      </a>
    </div>
  </nav>
  </div>
</div>
<div class="container">

  <div class="dashboard-section">

    <div class="sidebar">
    <ul class="test-status">
      <li>
        New Exam
        <ul class="status-option">
          <li>
          <a href="#all">Step-1</a>
          </li>
          <li>
            <a href="#running">Step-2</a>
          </li>
          <li>
            <a href="#ended">Step-3</a>
          </li>
        </ul>
      </li>
    </ul>
  </div>
<div class="row my-4">
    <div class="col-lg-20 mx-auto">
      <div class="card shadow">
        <div class="card-body p-4">
            <div id="show_item">
              <form method="post" action="" id="add_form">
              <div class="row">
                <div class="col-md-3 mb-3 question_input">
                  <textarea name="questionInput[]" class="form-control"
                  placeholder="Enter Your Question Here" required></textarea>
                </div>
                <div class="col-md-3 mb-3 option">
                  <input type="text" name="Option1[]" class="form-control"
                  placeholder="option 1" required>
                </div>

                <div class="col-md-4 mb-3 option">
                  <input type="text" name="Option2[]" class="form-control"
                  placeholder="Option 2" required>
                </div>

                <div class="col-md-3 mb-3 option">
                  <input type="text" name="Option3[]" class="form-control"
                  placeholder="Option 3" required>
                </div>

                <div class="col-md-3 md-3 option">
                  <input type="text" name="Option4[]" class="form-control"
                  placeholder="option 4" required>
                </div>

                <div class="col-md-3 md-3 answer">
                  <input type="text" name="answer[]" class="form-control"
                  placeholder="Enter the Right Answer" required>
                </div>

                <div class="col-md-2 mb-3 answer">
                  <button class="btn btn-success add_item_btn">Add More Question</button>
                </div>
              </div>
              <div>
                <button type="submit" class="btn btn-success add_item_btn" id="add_btn">Publish Exam</button>
                {# <input type="submit" class="btn btn-primary W-25" id="add_btn" value="Publish Exam"> #}
              </div>
              </form>
            </div>
        </div>
      </div>
    </div>
  </div>
  {% set examId = getExamId %}
  <script>
       document.addEventListener('click', function(e) {
            if (e.target.classList.contains('add_item_btn')) {
                e.preventDefault();
                let container = document.getElementById('show_item');
                 let newRow = document.createElement('div');
                newRow.className = 'row';
                newRow.innerHTML = `
                    <div class="col-md-3 mb-3 question_input">
                  <textarea name="questionInput" class="form-control"
                  placeholder="Enter Your Question Here" required></textarea>
                </div>
                <div class="col-md-3 mb-3 option">
                  <input type="text" name="Option1" class="form-control"
                  placeholder="option 1" required>
                </div>

                <div class="col-md-4 mb-3 option">
                  <input type="text" name="Option2" class="form-control"
                  placeholder="Option 2" required>
                </div>

                <div class="col-md-3 mb-3 option">
                  <input type="text" name="Option3" class="form-control"
                  placeholder="Option 3" required>
                </div>

                <div class="col-md-3 md-3 option">
                  <input type="text" name="option4" class="form-control"
                  placeholder="option 4" required>
                </div>

                <div class="col-md-3 md-3 answer">
                  <input type="text" name="answer" class="form-control"
                  placeholder="Enter the Right Answer" required>
                </div>
                    <div class="col-md-2 mb-3 answer">
                        <button class="btn btn-danger remove_item_btn">Remove</button>
                    </div>
                `;
                container.prepend(newRow);
            }
        });
        document.addEventListener('click',function(e) {
          if(e.target.classList.contains('remove_item_btn')) {
            e.preventDefault();
            let container = document.getElementById('show_item');
            container.removeChild(container.firstElementChild);
          }
        })

        function updateTextInput(val) {
          document.getElementById('textInput').value=val;
        }

        $("#add_form").submit(function(e) {
          e.preventDefault();
          $("#add_btn").val('Adding...');
          $.ajax({
            url: '/add_quest9ion/'+ {{ getExamId }},
            method: 'post',
            data: $(this).serialize(),
            success:function(response) {
              console.log(response);
            }
          });
        });
    </script>
  {% endblock %}

</body>
</html>
